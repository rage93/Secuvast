{% extends 'dashboard/base.html' %}

{% block head_title %}Factura {{ factura.id }} - {{ block.super }}{% endblock %}

{% block content %}
<h1 class="text-2xl font-bold mb-4">Factura {{ factura.id }}</h1>
<p class="mb-2"><strong>Cliente:</strong> {{ factura.cliente.nombre }}</p>
<p class="mb-2"><strong>Fecha:</strong> {{ factura.fecha|date:"Y-m-d" }}</p>
<p class="mb-4"><strong>Total:</strong> {{ factura.total_calculado }}</p>

<form method="post">
  {% csrf_token %}
  {{ formset.management_form }}
  <table class="min-w-full divide-y divide-gray-200">
    <thead>
      <tr>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Producto</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cantidad</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Precio</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Eliminar</th>
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200">
      {% for form in formset %}
      <tr>
        <td class="px-6 py-4 whitespace-nowrap">{{ form.producto }}</td>
        <td class="px-6 py-4 whitespace-nowrap">{{ form.cantidad }}</td>
        <td class="px-6 py-4 whitespace-nowrap">{{ form.precio_unitario }}</td>
        <td class="px-6 py-4 whitespace-nowrap">{{ form.DELETE }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <button type="submit" class="mt-4 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5">Guardar</button>
</form>
{% endblock %}
